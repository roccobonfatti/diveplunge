import React, { useState } from 'react';

const TopBar = ({ setCenter }: { setCenter: (center: [number, number]) => void }) => {
  const [query, setQuery] = useState('');

  const handleSearch = async () => {
    const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`, {
      headers: { 'Accept-Language': 'it', 'User-Agent': 'diveplunge/0.1 (admin@diveplunge.com)' }
    });
    const data = await response.json();
    if (data.length > 0) {
      const { lat, lon } = data[0];
      setCenter([parseFloat(lat), parseFloat(lon)]);
    }
  };

  return (
    <div>
      <input type="text" value={query} onChange={(e) => setQuery(e.target.value)} />
      <button onClick={handleSearch}>Cerca</button>
    </div>
  );
};

export default TopBar;